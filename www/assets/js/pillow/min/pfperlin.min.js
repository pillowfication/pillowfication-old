(function(e){"use strict";function t(t){var n={dimensions:2,min:0,max:1,wavelength:1,octaves:8,octave_scale:2,persistence:.5,interpolation:e.interpolation.cosine};for(var r in t)n[r]=t[r];return n.factor=(n.max-n.min)*(n.persistence-1)/(Math.pow(n.persistence,n.octaves)-1),n}e.perlin=function(n){function d(e){var t=[],n=[];for(var r=0;r<i;++r)t.push(Math.floor(e[r])),n.push(e[r]-t[r]);var o=[],u=[];for(var r=0;r<s;++r){for(var a=0;a<i;++a)u[a]=t[a]+(r>>a&1);o.push(v(u))}for(var r=0;r<i;++r)for(var a=0;a<s>>r;a+=2)o[a>>1]=h(o[a],o[a+1],n[r]);return o[0]}function v(e){var t=r;for(var n=0;n<o;++n)t=t[e[n]]||(t[e[n]]=[]);return t[e[o]]||(t[e[o]]=Math.random())}if(!n||!n.dimensions||n.dimensions==2)return e.perlin2D(n);n=t(n);var r=[],i=n.dimensions,s=1<<i,o=i-1,u=n.min,a=n.wavelength,f=n.octaves,l=n.octave_scale,c=n.persistence,h=n.interpolation,p=n.factor;return{get:function(e){var t=e.constructor===Array?e:arguments;for(var n=0;n<i;++n)t[n]/=a;var r=[],s=0,o=1,h=1;for(var n=0;n<f;++n){for(var v=0;v<i;++v)r[v]=t[v]*o;s+=d(r)*h,o*=l,h*=c}return s*p+u}}},e.perlin2D=function(e){function l(e,t){var n=Math.floor(e),r=Math.floor(t),i=e-n;return a(a(c(n,r),c(n+1,r),i),a(c(n,r+1),c(n+1,r+1),i),t-r)}function c(e,t){return e=n[e]||(n[e]=[]),e[t]||(e[t]=Math.random())}e=t(e);var n=[],r=e.min,i=e.wavelength,s=e.octaves,o=e.octave_scale,u=e.persistence,a=e.interpolation,f=e.factor;return{get:function(e,t){e.constructor===Array?(t=e[1]/i,e=e[0]/i):(e/=i,t/=i);var n=0,a=1,c=1;for(var h=0;h<s;++h)n+=l(e*a,t*a)*c,a*=o,c*=u;return n*f+r}}},e.interpolation=e.interpolation||{},e.interpolation.none=function(e,t,n){return e},e.interpolation.nearest=function(e,t,n){return n<.5?e:t},e.interpolation.linear=function(e,t,n){return n*(t-e)+e},e.interpolation.cosine=function(e,t,n){return(1-Math.cos(Math.PI*n))*(t-e)/2+e}})(window.Pillow=window.Pillow||{});